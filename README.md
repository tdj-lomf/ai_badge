# ai_badge
## ハードウェア
- Arduino MKR WiFi 1010
- 電池ボックス (モータ用)
- モバイルバッテリー (回路用)

## 導入方法
### ハードの準備
1. 単三電池×4が入った電池ボックスを回路に接続する (回路上の－マークと黒ケーブルを合わせる）
2. 回路上にあるモータ用のスライドスイッチをONにする（Arduinoに近い方がON）  
    ※終了時は、必ずスイッチをOFFにするか、電池ボックスのケーブルを抜く

### ソフトの書き込み＆デバッグ
1. Arduino 公式ガイドに沿って、プログラムを書き込むところまで進める(Desktop IDEを推奨)  
	https://www.arduino.cc/en/Guide/MKRWiFi1010
2. ソースコードをcloneする  
	https://github.com/tdj-lomf/ai_badge
3. Desktop IDEでコードを開く(ai_badge.ino)
4. タブからWebServer.inoを開き、ssidとpassを使用するWiFi環境に合わせて書き換える
5. ArduinoとPCをmicro-usbケーブルで接続し、コードを書き込む  
	※充電専用ケーブルでは書き込めない。通信可能なケーブルを使う。
6. 10秒ほど待ち、IDE下部のSerial MonitorにIPアドレスが表示されればOK。また、このとき瞳やまぶたが初期位置に戻り、回路上の橙色のLEDが点灯する。
7. 同じWifiに接続されているPCやスマホのWebブラウザ(Chromeで動作確認済）から、表示されたIPアドレスにアクセスする。
8. 表示されたサイト上のボタンで瞳やまぶたを操作する。

### 実使用
1. PCではなく、モバイルバッテリーとArduinoをmicro-usbケーブルで接続し給電する
2. 上記と同様に10秒ほど待ち、同じIPアドレスに接続して動作確認する

## トラブルシューティング
- Webブラウザとの通信が切れた
  - 回路上のリセットボタンを押し、再び接続されるまで待つ
  - 切断原因不明。自動的にリセットできるように修正できるか？
- 瞳が動かなくなった
  - リンクが特異点を越えたり、外れた可能性がある。瞳を左回しで外し、ケースの2箇所のネジを取って、中を確認する。